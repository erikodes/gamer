<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-button color="dark" class="btn-close" (click)="modalController.dismiss()">
                <ion-icon slot="icon-only" name="close-outline"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-title>Publicar</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
    <form [formGroup]="clipForm" novalidate>
        <ion-list class="form">
            <div class="d-flex ion-padding-bottom">
                <ngx-dropzone (change)="onSelectVideo($event)" [multiple]="false" accept="video/mp4" *ngIf="!file">
                    <ngx-dropzone-label>
                        <ion-icon class="icon-video"></ion-icon>
                        <h6 class="font-bold">
                            Tap to upload a video
                        </h6>
                    </ngx-dropzone-label>
                </ngx-dropzone>
                <div class="video" *ngIf="file">
                    <video [src]="file?.url" height="100%" width="100%" autoplay muted loop #video></video>
                    <ion-button color="light" (click)="removeVideo()" class="ion-no-margin ion-no-padding">
                        <ion-icon slot="icon-only" color="dark" name="trash"></ion-icon>
                    </ion-button>
                </div>

                <ion-textarea slot="start" placeholder="Agregar descripción..." formControlName="title" rows="4">
                </ion-textarea>
            </div>

            <hr>

            <input type="file" id="my_file" (change)="onSelectVideo($event)" style="display: none;">

            <ion-list class="options">
                <ion-item class="ion-margin-vertical" detail="true" (click)="viewOptions()">
                    <ion-icon name="lock-open-outline" slot="start"></ion-icon>
                    <ion-label>Quién puede ver este clip</ion-label>
                    <ion-label slot="end" color="medium" *ngIf="clipForm.controls.viewOption.value === 'all'">Todos
                    </ion-label>
                    <ion-label slot="end" color="medium" *ngIf="clipForm.controls.viewOption.value === 'friends'">Amigos
                    </ion-label>
                    <ion-label slot="end" color="medium" *ngIf="clipForm.controls.viewOption.value === 'me'">Solo yo
                    </ion-label>
                </ion-item>
                <ion-item class="ion-margin-bottom">
                    <ion-icon name="chatbox-ellipses-outline" slot="start"></ion-icon>
                    <ion-label>Permitime comentarios</ion-label>
                    <ion-toggle slot="end" name="apple" formControlName="comments" checked></ion-toggle>
                </ion-item>
                <ion-item class="ion-margin-bottom" detail="true">
                    <ion-icon name="people-outline" slot="start"></ion-icon>
                    <ion-label>Etiquetar jugadores</ion-label>
                    <ion-label slot="end" color="medium">3 personas</ion-label>
                </ion-item>
                <ion-item class="ion-margin-bottom" detail="true" (click)="selectGame()">
                    <ion-icon name="game-controller-outline" slot="start"></ion-icon>
                    <ion-label>Seleccionar juego</ion-label>
                    <ion-label slot="end" color="medium">{{game.name}}</ion-label>
                </ion-item>
            </ion-list>
        </ion-list>
    </form>
</ion-content>
<ion-footer>
    <ion-toolbar class="ion-text-center">
        <div class="d-flex">
            <ion-button class="w--100" expand="block" color="light">
                <ion-icon name="file-tray-full-outline" color="dark" slot="start"></ion-icon>
                Borradores
            </ion-button>
            <ion-button class="w--100" expand="block" (click)="addClip()">
                <ion-icon name="arrow-up-outline" slot="start"></ion-icon>
                Publicar
            </ion-button>
        </div>
    </ion-toolbar>
</ion-footer>